# This file was autogenerated by the modm cmake builder.
# Do not modify!

CMAKE_MINIMUM_REQUIRED(VERSION 3.0)
PROJECT(modm-cmake-template)

IF(NOT CMAKE_CONFIGURATION_TYPES AND NOT CMAKE_BUILD_TYPE)
   SET(CMAKE_BUILD_TYPE Release)
ENDIF()

FILE(GLOB_RECURSE APP_STARTUP *.sx)
SET_SOURCE_FILES_PROPERTIES(${APP_STARTUP} PROPERTIES LANGUAGE CXX)

SET(SOURCE_FILES
    modm/src/modm/architecture/driver/atomic/flag.cpp
    modm/src/modm/board/board.cpp
    modm/src/modm/io/iodevice.cpp
    modm/src/modm/io/iostream.cpp
    modm/src/modm/io/iostream_float.cpp
    modm/src/modm/io/iostream_printf.cpp
    modm/src/modm/math/utils/bit_operation.cpp
    modm/src/modm/math/utils/pc/operator.cpp
    modm/src/modm/platform/clock/clock.cpp
    modm/src/modm/platform/clock/delay.cpp
    modm/src/modm/platform/clock/latency.cpp
    modm/src/modm/platform/clock/modm_clock.cpp
    modm/src/modm/platform/clock/systick_timer.cpp
    modm/src/modm/platform/core/assert.cpp
    modm/src/modm/platform/core/cxxabi.cpp
    modm/src/modm/platform/core/default_handler.sx
    modm/src/modm/platform/core/heap_newlib.c
    modm/src/modm/platform/core/heap_table.c
    modm/src/modm/platform/core/startup.c
    modm/src/modm/platform/core/vectors.c
    modm/src/modm/platform/gpio/enable.cpp
    modm/src/modm/utils/dummy.cpp
    ./src/main.cpp
)

INCLUDE_DIRECTORIES(
    ${CMAKE_CURRENT_SOURCE_DIR}
    modm/ext
    modm/ext/cmsis/core
    modm/ext/cmsis/device
    modm/src
)
INCLUDE_DIRECTORIES(SYSTEM include)

SET(PROJECT_PLATFORM   stm32)
SET(PROJECT_COMPILER   gcc)
SET(PROJECT_PART       stm32f103c8t)
SET(PROJECT_FAMILY     f1)
SET(PROJECT_CORE       cortex-m3)
SET(PROJECT_NAME       modm-cmake-template)
SET(PROJECT_BUILD_PATH ./)

INCLUDE(./modm/cmake/configure-stm32-gcc.cmake)

if ( APPLE )
    string ( REPLACE "-Wl,-search_paths_first" "" CMAKE_C_LINK_FLAGS ${CMAKE_C_LINK_FLAGS} )
    string ( REPLACE "-Wl,-search_paths_first" "" CMAKE_CXX_LINK_FLAGS ${CMAKE_CXX_LINK_FLAGS} )
endif ()

ADD_EXECUTABLE(${CMAKE_PROJECT_NAME} ${SOURCE_FILES})
SET_TARGET_PROPERTIES(${CMAKE_PROJECT_NAME} PROPERTIES SUFFIX ".elf")

IF(CMAKE_BUILD_TYPE STREQUAL "Debug")
	TARGET_COMPILE_DEFINITIONS(${CMAKE_PROJECT_NAME} PUBLIC "MODM_DEBUG_BUILD")
ENDIF()
ADD_CUSTOM_TARGET(${CMAKE_PROJECT_NAME}.bin ALL DEPENDS ${CMAKE_PROJECT_NAME} COMMAND ${CMAKE_OBJCOPY} -Obinary ${CMAKE_PROJECT_NAME}.elf ${CMAKE_PROJECT_NAME}.bin)
ADD_CUSTOM_TARGET(${CMAKE_PROJECT_NAME}.hex ALL DEPENDS ${CMAKE_PROJECT_NAME} COMMAND ${CMAKE_OBJCOPY} -Oihex ${CMAKE_PROJECT_NAME}.elf ${CMAKE_PROJECT_NAME}.hex)
ADD_CUSTOM_TARGET(${CMAKE_PROJECT_NAME}.lss ALL DEPENDS ${CMAKE_PROJECT_NAME} COMMAND ${CMAKE_OBJDUMP}  -x -s -S -l -w ${CMAKE_PROJECT_NAME}.elf > ${CMAKE_PROJECT_NAME}.lss)
ADD_CUSTOM_COMMAND(TARGET ${CMAKE_PROJECT_NAME} POST_BUILD COMMAND ${CMAKE_SIZE} ARGS ${CMAKE_PROJECT_NAME}.elf)